## Stuff for programs which should be available everywhere {{{

export BYOBU_PREFIX="/usr"
export BYOBU_CONFIG_DIR="$HOME/.byobu"
export EDITOR=vim
alias e='editor'

## Enable color support of ls and also add handy aliases {{{
if [ -x /usr/bin/dircolors ]; then
    export LS_OPTIONS='--color=auto'
    eval "`dircolors`"
    alias ls='ls --color=auto --human-readable'
    alias grep='grep --color=auto'
    alias fgrep='fgrep --color=auto'
    alias egrep='egrep --color=auto'
fi

alias ll='ls -alF'
alias la='ls -A'
alias l='ls -CF'
alias bc='bc -q'
alias ,='popd'
alias d='dirs -v'
alias ts='date "+%F_%T"'

## Ignore typos {{{
alias 6s='ls'
alias sl='ls'
alias fgfg='fg'
## }}}

## }}}

## Little functions {{{
function up {
[[ "${1/[^0-9]/}" == "$1" ]] && {
    local ups=""
    for i in $(seq 1 $1)
    do
        ups="$ups../"
    done
    cd $ups
    } || echo "usage: up INTEGER"
}
alias b='up'

## Create a new directory and enter it.
unalias md 2>/dev/zero
function md() {
    mkdir -p "$@" && cd "$@"
}

function run-c() {
    echo "main(){ $@ }" | tcc -run -
}
function gpg-load-all-signing-keys() {
    gpg --list-sigs "$1" | perl -pe 's/.*(\w{8}) .*/$1/'|while read keyid; do gpg --recv-keys "$keyid"; done
}
## }}}

## Vim stuff {{{
# if [[ -e "$HOME/Projekte/src/vim/src/vim" ]]; then
	# alias vim="/usr/bin/vim"
# fi

if [[ "$USER" == 'root' ]]; then
    alias vi='vim'
else
    # alias vi='vim --servername VIM'
    # alias vir='vi --remote'
    alias vi='vim'
fi
alias ,e='exit'
alias ,x='exit'
alias ,r='vi'
# alias less='vim -c "w! /tmp/.vimpager" -'
## }}}

alias sshfs='sshfs -o transform_symlinks'
alias rsync-only-pw='rsync -e "ssh -o PubkeyAuthentication=no"'
alias ssh-only-pw='ssh -o PubkeyAuthentication=no'
alias scp-only-pw='scp -o PubkeyAuthentication=no'
alias ssh-copy-id='ssh-copy-id -o PubkeyAuthentication=no'
alias m='mosh'
if which compdef >/dev/null 2>&1 && which mosh >/dev/null 2>&1; then
    compdef m=mosh
fi
alias tmux='TERM=screen-256color-bce tmux'
alias t='tmux'
alias f='tmux last-window'
alias h='htop'
alias '*'='dict'

## Use the shortcuts from oh-my-zsh for git
alias wd='git diff --color-words --no-index'
alias ι='git status' # Shift+Level3Mod+s
# overwrite alias from oh-my-zsh {{{
alias glg='git log --stat --decorate=short --show-signature' # full history
# alias glg='tig --show-signature' # full history

# Define important sortcuts here if under bash (are already defended by oh-my-zsh) {{{
alias g='git'
alias gst='git status'
alias gco='git checkout'
alias gca='git commit -v -a'
alias gc='git commit -v'
alias gb='git branch'
# }}}

unalias gp 2>/dev/zero
function gp {
    if [[ "$PWD" =~ "$HOME/Beruf" ]]; then
        echo "Work"
        gitw push $@ -v
    else
        git push $@ -v
    fi
}
unalias gl 2>/dev/zero
function gl {
    if [[ "$PWD" =~ "$HOME/Beruf" ]]; then
        echo "Work"
        gitw pull $@ -v
    else
        git pull $@ -v
    fi
}
# }}}
## }}}

alias gpg-check-debian-iso='gpg --no-default-keyring --keyring /usr/share/keyrings/debian-role-keys.gpg --verify'
alias gpg-sign='gpg --default-key 489A4D5EC353C98A --armor --detach-sig'

alias a='git-annex'
if which compdef >/dev/null 2>&1 && which git-annex >/dev/null 2>&1; then
    compdef a=git-annex
fi

# http://stackoverflow.com/questions/16787916/difference-between-2-directories-in-linux
alias diff-dir='diff -arq'

alias percent-encode='python -c "import urllib, sys; print urllib.quote(sys.argv[1])"'
alias percent-decode='python -c "import urllib, sys; print urllib.unquote(sys.argv[1])"'

## FIXME legacy
if which ack-grep >/dev/null 2>&1; then
    alias ack='ack-grep'
fi

alias ass='aptitude search'
alias as='apt-cache search' ## Much faster. I normally don’t need to know if the thing is installed, respectively I can check that later with aptitude install.
alias ash='/usr/bin/aptitude show' ## Does not need to run as root.
if [[ "$USER" != 'root' ]]; then
    alias mount='sudo mount'
    alias umount='sudo umount'
    alias aptitude='sudo aptitude'
    alias apt-add--repository='sudo apt-add--repository'
fi

alias xclip-primary-to-clipboard='xclip -out |xclip -in -selection clipboard'

## TeX and LaTeX {{{
alias sty2dtx='~/Projekte/src/sty2dtx/sty2dtx.pl'
alias xgettext='xgettext --copyright-holder="`git config --get user.name` <`git config --get user.email`>" --msgid-bugs-address="`git config --get user.email`"'
## }}}

# export PERL_LOCAL_LIB_ROOT="$HOME/.cpan/perl5";
# export PERL_MB_OPT="--install_base $HOME/.cpan/perl5";
# export PERL_MM_OPT="INSTALL_BASE=$HOME/.cpan/perl5";
# export PERL5LIB="$HOME/Projekte/Programmiersprachen/Perl/lib:$HOME/.cpan/perl5/lib/perl5";
# if [[ `getconf LONG_BIT` == 64 ]]; then ## Running under a 64 Bit Kernel
    # PERL5LIB="$HOME/.cpan/perl5/lib/perl5/x86_64-linux-gnu-thread-multi:$PERL5LIB"
# else
    # PERL5LIB="$HOME/.cpan/perl5/lib/perl5/i486-linux-gnu-thread-multi::$PERL5LIB"
# fi
# PATH="$PATH:$HOME/.cpan/perl5/bin";

if [ -d "$HOME/Skripte/repository" ]; then
    PATH="$HOME/Skripte:$HOME/Skripte/repository:$PATH"
fi

user_install_dir="$HOME/.local/usr"
if [ -d "$user_install_dir" ]; then
    PATH="$user_install_dir/bin:$PATH"
    PYTHONPATH="$user_install_dir/lib/python2.7/site-packages:$PYTHONPATH"
fi

export PYTHONSTARTUP="$HOME/.pystartup"
export PYTHONPATH='.'
